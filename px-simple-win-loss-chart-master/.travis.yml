sudo: false
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester@^5.0.0
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
after_success:
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then openssl aes-256-cbc -k "$DEPLOYSECRET"
  -in deploy.enc -out deploy_key -d; fi
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"
env:
  global:
  - secure: qjmfdajXB3cGEZwRWYUps9u2qTpJPM1uhdm+LyvOSpfernzDG0RLN4jaiIONsdrnu7SHL1byGiwq/sdF/bRxcU2vEg/87pGfRYfUsn+JUHJYjTWxRetBhR1d6U12FHQ8HpQoa4AJvNsqcm9u7LDDDZuZsOljTU6IJrwm+8WiTgZORe353INmgQKquWyRREgfW57SWYxpmsxSKFCNadNeHYxkjW2PKNzllUxX6lLqhCL7ocTQYJZWyeTrsl6DKIYJ4YWjY4BK3fJYIfGn/cvsBMohEzVH+asW+6KtYO+zW4W8d+aEdGulXbrm8E0ojNM2MIjsbpqqCkWfFFNdKmWYvs+oIzdM+7g2srIDJPhWzu5DSn43q9S/R90Qd20ubSA8FdACxvd/U+kZ2c410zvTXYo7m3M74/brGCO2D0fMEtr8zsgPKdr6l/c7b3Xy+52fJVnvl3p/UN2vVLlA+pIksCgkQhEs7+T0H0JVhfpqrtnJnUlwX9sdu2hgh7Lt9recVOuS2QrGmkyxHlU8n8GIPC6PoMWJj1bMF4V1HboHy9gCMqokyKQFbzcy+zgJXnLnJnGM51HXq80eZDwf3qh9Kl+RCIlPuRI3oF1iG72lWiC1pKhnH8caMmH1SCYFk+dm78IcUg1pOI2naE6nNIGBk6jRJCOna3/Tql/HW3mUijk=
  - secure: aUl7PJXJVkwgl3DkYzF4bHfJCLoWPuVDUXRozP/a87r+exu1obfp0YP1cT97gIJz19bRNrghQLk3inuDKAmhL6/B24tl5fbrC23z2PX0wBD+K4lsXz6M4qKGcxq4to0c3vmqJMDPmNJNPhfP4CVq0SEkqRoEqu0fvq/JKukYFpaeNcqO1VWIt7vAuKZJFXVymO/pXDixA1OV/IC0nUUyfjXLwHNafkac0cExa21CAZRSb27sKbz2HzYv/BarHcJv+Lmw7rtraKZBkgoFskE8j55X8MmtLMpXjCB9V6pEif8JJGvgRXlYZ6YaX99XEzZIIBhM0aNsfDEIVVxbXCrlciBjTPI2pq+8USNf9cIK1UcpPnnDWZ2tVrz4l9hGfgU9QTgL0IhGrrOoPVszcqfQILwH1o1+2PviA7Gs5oNHuz9BIOTTAwUZ/nG9OZY9GmcL30bdh1PTz6TSUwI3vFDjQR6trW4DalyrBGMMot9jRi21nLNVYxZWzxiVP7josQrgiyBCINKLxdD62fOansROkvNjQgNWyEMUG5vlEY3rGUMDkkcVNeT41OrEAoZPSwNRynnMfLUCtzt4mXU5tsKpm/xu7KKFl4UHTzUP374ptzlJzOQZ8VM1Lvp78Bh9B4kJ+AgVZ9XDkvo0TqeCoxge9UL55f/50GYJA9xJ93toTt0=
  - secure: PlUVM8m8wm/4cVynfRhx8KiyeS4IQDjvbGjWf6OaWZuu4i6orCLLECU7RlP0STzVKey6L7ZidXCFJNxitR2F9Zf2Tp4wihit5dYwTTg9LJ6H+iAKr9yoZHY+qPoghT4bnYOlPeCNkFatV/+QSjhZ3Le49LrKF7MJL9kAU6+HmDiNaeda3JLYEHx8yMy0y16WbTc9cgsPtGCfLE2Qlos2pyeuZ3x/lv8Bqn7OaJYajCND8dQbigAF/xDGPtqac7gciCy4oZo1DTILf2K3fLm+ndX4ZOcEyRzC9aCr2YnTVBwc4aXAi+FpV6S33yEsSykhc+eEzBSDwnqBOCLun7J79Vatq7BMz75/+EoEJ0l14Z3cwd5i3b6xqBFASCcaOvzJAoCHZNrHLuxpSrLgagR9BDi1qdaEjGGG8t7n5HkV29wVuzoKGu6JtPI+d6DZaLG10pWZnOpalNqeqXu/l33vv6L8ROLsOgWihYdmh5FeQBxAvIB7UTeT2I9MQxLwSI/g0IgtCwCg4uYvCfV8e/9jKRcGOOSJZbkqA8ODyfsvf+DL/IAeQW/V6WZFnE+63/pfxT6AkNMWWPwX+gu2Fr7EoKb6V3DCqQF1AF5SQWVmj78WbGsPjNRwONYfVlEpzyVILLYtYvAHajjh1c8FIxq+pVvf+RFr1pi3b76OBpy/PW0=
  - secure: W6zOL8P8cgtQ7II+LJ59jdVPbSu1y/BjGlDQnom28pmgMiWIu9uWP6tNrAhRWtQuhWNI7MJfgyg7Tmc0CxZZAnST3c5uZFQyVkCKDT447U4IzAvLHw6ApAkfqiihWd41zoJecYp3VrbnZU3vf9jb21c+woAuFSxXdqU0udHGvSnA7WhKGWyk7padA4Hrdd7dnnNswIYOVeVBwG76VURekNyd/I6BsYzuvoMNjaaAEDBzgshJ0CjxOpcdXvbxZtG1ROtkJpPva9gw4wlEDEk+kQl52bMzi6PrgAp1N2hk47C50hk9UCTEPlBylHbKIIc8BwWVDTK0H6Y/zXi3n2VVm5eid8sHEW+SblIig/rxKfbkGQJcgRCkKppJPYJag1L1hAAVvK4ubshaNmToiyiBpY9nsEuFPOFgqHu4BzICbTushXYbyVuXnxUMMKlSR0Li6iBt+0xjESohnX4VA2j9rlud0XKiJc9vkcDF9cvdwlCiie6bC8++urBtsy7HITzB+I9RU9IBlUXnl+xRLNn4cHRMjIl8NZXAkciDjm/nlUoKqBB2ULTmo38TcaULL0WNKguqc7zEo9gkwFkjYt14qlVPw8e4CywXjYWrFSZG+nx+rhutF+n/9TV5MEmHIWkU2jJKs4CP6ZMn0X9HveWMA7nZ2wtrYvvuSgWLDd1Klqk=
